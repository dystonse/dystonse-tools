# dystonse-tools-agencies
This is a collections of tools for gathering and organizing information about German transit agencies. We do not consider this to be a _core_ application of dystonse and as such, it has a low maintainance standard.

## Requirements
 * You need to have the tool `pdf2txt`, which you can install by running `pip install pdfminer` on any python-enabled system. On some linux distributions you might be able to get it from your system's package manager, e.g. `apt-get`.
 * NodeJS
 * curl

## Extraction
This downloads the current list of member companies from the [VDV website](https://www.vdv.de/) and reformats it as csv table. The VDV is a large association of transit companies, which maintains a high quality list of member organizations.

Usage:

```
run_extraction.sh
```

## Matching
This tries to find corresponding items in `output/vdv.csv` (as generated by the _Extraction_ step) and an agency list from a GTFS data set. This might be useful because agency.txt may contain low quality data, where each agency is only represented by a very short name / acronym.

Usage:

```
node compare_vdv_agencies.js PATH_TO_AGENCY_LIST
```

Where `PATH_TO_AGENCY_LIST` points to an `agency.txt` file. In a first step, it will try to find identical names and names with high similarity. After that, it will query you for a guided search of matches with low similarity.

All matches will be appended to `output/matches.csv`. The first column contains a similarity measure for automatic matches (between `70%` and `100%`), or `manual` for guided matches. If you re-run the tool, old matches will be kept and only unmatched items will be re-queried.

## More potential data sources
 * List of acronyms: http://www.bahnseite.de/purespace/verbuende.html
 * Map of German transit associations: https://github.com/highsource/verbundkarte